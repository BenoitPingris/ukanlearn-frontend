import { writable } from "svelte/store";
import { exclude } from 'utils/exclude'

/**
 * 
 * @param {import('axios').AxiosInstance} client 
 */
function _createEditor(client) {
    const state = {
        musicName: '',
        autor: '',
        instrument: 'guitar',
        chords: []
    };

    const { set, update, subscribe } = writable(state);

    return {
        set,
        update,
        subscribe,
        addChord(chord) {
            update(n => ({ ...n, chords: [...n.chords, chord] }))
        },
        removeChord(index) {
            update(n => {
                n.chords.splice(index, 1)
                return n
            })
        }
    };
}

export let editor = null;

/**
 * 
 * @param {import('axios').AxiosInstance} client 
 */
export function createEditor(client) {
    editor = _createEditor(client)
}