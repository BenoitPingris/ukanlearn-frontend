<script>
  import { createEventDispatcher } from "svelte";
  import { fly } from "svelte/transition";

  export let open = false;
  export let items;
  export let value;

  const dispatch = createEventDispatcher();
  let current = items.find(o => o.value === value).text;

  function clickItem(item) {
    open = false;
    value = item.value;
    current = item.text;
    dispatch("select", item);
  }
</script>

<div class="relative block w-full">
  <div
    class="bg-white border flex justify-between w-full border-gray-500 rounded
    px-3 py-2 text-lg font-thin cursor-pointer"
    on:click={() => (open = !open)}>
    {#if !current}
      <slot name="trigger">Select an option</slot>
    {:else}{current}{/if}
    <span class="mr-3 transform" class:rotate-180={open}>â–¼</span>
  </div>
  {#if open}
    <div
      transition:fly={{ y: -10, duration: 250 }}
      class="w-full block absolute left-0 bg-white border border-gray-400
      shadow-xl">
      {#each items as item}
        <div
          on:click={() => clickItem(item)}
          class="text-lg font-thin cursor-pointer px-3 py-2 hover:bg-gray-100
          border-0 border-b-2 border-gray-400">
          {item.text}
        </div>
      {/each}
    </div>
  {/if}
</div>
